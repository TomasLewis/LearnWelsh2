function test(){
var picNum=0,correct=!1,answerTrue,rightAnswers,starPicsArray=[],starBoxVisible=!1,eoAudioArray=[],answer1,multipleChoiceArray,inputString,timerTime=0,refreshIntervalId,interval2,chars,currentActivity,whatIsThis=resourceurl+"sounds/interface/lang/"+shortCode+"/what-is-this-a-picture-of.mp3",firstScreen,firstView;

whatIsThis=new Howl({urls:[whatIsThis]}),"0"==topicsSelected?landed():preload(topicNames,"big",landed);
$("#content").on("mouseenter","#sharedEndGoArra",function(){myString=$(this).text(),setStatusString(myString)}).on("click","#sharedEndGoArra",function(){clickS.play(),"multipleChoice"==currentActivity?third():(myString=siteurl+lotopicURL,window.location.href=myString)});

function goBack(){first()}
function landed(){$("#back").css("visibility","hidden"),firstScreen=$("#content").html(),firstView=!0,first()}

function first(){0==firstView&&$("#content").html(firstScreen),firstView=!1,$("#loading").css("visibility","hidden"),defaultStatusString=modStrings[5],setStatusString(defaultStatusString),$("#selButtonFull").on("click",second),$("#goGames,#topicsSign").on("click",function(){clickS.play()}),$("#introButton").on("click",third),$("#selButtonFull").hover(function(){setStatusString(modStrings[43])},setDefaultString),$("#goGames").hover(function(){myString=modStrings[45],setStatusString(myString)},setDefaultString),$("#topicsSign").hover(function(){myString=modStrings[28],setStatusString(myString)},setDefaultString),$("#introButton").hover(function(){setStatusString(modStrings[29])},setDefaultString)}function sharedEndInterface(i){myString='<div id="introBlueTitle"></div><div id="introBlueText"></div><div id="introBlueAgain"><div class="arraSign">'+arra206+'<div class="arraLabel206">'+modStrings[27]+'</div></div></div><div class="introBlueGoArra" id="sharedEndGoArra"><p>',myString+="writingTest"!==i?modStrings[29]+"</p></div>":modStrings[41]+"</p></div>",$("#contentSign").html(myString),$("#introBlueAgain").hover(function(){myString=$(this).text(),setStatusString(myString)},setDefaultString).click(function(){"multipleChoice"==i?second():third()})}function sharedInterface(i){$("#introBlueGoArra").unbind("mouseenter mouseleave click"),$("#back").css("visibility","visible"),$("#contentSign").empty(),$("#content").empty(),html='<div id="hPipe3"><div class="pipeH"></div></div><div id="hPipe4"><div class="pipeH"></div></div><div id="hPipe5"><div class="pipeH"></div></div><div id="hPipe6"><div class="pipeH"></div></div><div id="sign_leftPipe"><div class="pipeV"></div></div><div id="sign_middle2"><div class="pipeV"></div></div><div id="sign_rightPipe"><div class="pipeV"></div></div>',html+='<div id="infoSign"><div id="infoBrownTitle"></div><div id="infoBrownText"></div></div>',html+='<div id="navSignTest"><div id="a1"><div class="arraSign">'+arra206+'<div class="arraLabel206">'+modStrings[21]+'</div></div></div><div id="a2"><div class="arraSign">'+arra206+'<div class="arraLabel206">'+modStrings[22]+"</div></div></div></div>",html+='<div id="contentSign"><div id="introBlueTitle"></div><div id="introBlueText"></div><div class="introBlueGoArra" id="introBlueGoArra"><p> </p></div></div>',$("#content").append(html),$("#a1,#a2").on("click",function(){clearInterval(interval2),clearInterval(refreshIntervalId);var i=$(this).attr("id");"a1"==i?second():"a2"==i&&third()}).find(".arraSign").on("mouseenter",function(){chngArraSign($(this),"#fff","#000")}).on("mouseleave",function(){chngArraSign($(this),groundCol,strokeCol)}),$("#introBlueGoArra").hover(function(){myString=$(this).text(),setStatusString(myString)},setDefaultString),$("#a1,#a2").hover(function(){myString=$(this).text(),setStatusString(myString)},setDefaultString),1==i?myString=modStrings[21]:2==i&&(myString=modStrings[22]),$("#a"+i).html('<div class="navArraSelected"><p style="margin-left:10px;">'+myString+"</p></div>").off("click").unbind("mouseenter mouseleave")}function prepareActivityArrays(){myArray="primary"==level?[0,1,2,3,4,5,6,7,8,9]:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],shuffle(myArray),starPicsArray=myArray.slice(),picNum=myArray.shift(),count=0}function second(){currentActivity="multipleChoice",rightAnswers=0,sharedInterface(1),clickS.play(),defaultStatusString=modStrings[24],setStatusString(defaultStatusString),$("#infoBrownTitle").text(modStrings[6]),$("#infoBrownText").text(modStrings[42]),$("#introBlueTitle").text(modStrings[6]),myString="<p>"+modStrings[10]+modStrings[11]+"<br /><br />"+modStrings[42]+"</p>",$("#introBlueText").html(myString),$("#introBlueGoArra").text(modStrings[23]),prepareActivityArrays(),$("#introBlueGoArra").on("click",function(){for(clickS.play(),$("#introBlueGoArra").remove(),$("#contentSign").empty(),timerTime=0,refreshIntervalId=null,html='<div id="pipe_count"></div><div id="sign_count">'+count+'/10</div><div id="sign3_timerText">0 '+sec+'</div><div id="contentSignPic5"></div><div id="labels1"><div id="labelText1"></div></div><div id="labels2"><div id="labelText2"></div></div><div id="labels3"><div id="labelText3"></div></div><div id="labels4"><div id="labelText4"></div></div><div id="labels5"><div id="labelText5"></div></div>',$("#contentSign").append(html),j=184,k=speaker(29,strokeCol),i=1;i<6;i++)html='<div id="speaker-'+i+'"><div style="padding:9px 5px;">'+k+"</div></div>",$("#contentSign").append(html),$("#labels"+i).hide(),$("#speaker-"+i).hide(),$("#labels"+i).css("top",j).on("click",whatIsItLabListener),$("#speaker-"+i).css("top",j),j+=47;addStars(),refreshIntervalId=window.setInterval(secondTimer,1e3),whatIsItPicAndQ()})}function whatIsItLabListener(){myString=$(this).attr("name"),correct=answer1==myString?!0:!1,havingAnsweredWII()}function secondTimer(){timerTime+=1,$("#sign3_timerText").text(timerTime+" "+sec)}function whatIsItPicAndQ(){if(count+=1,count>=11)whatIsItFinished();else{multipleChoiceArray="primary"==level?[0,1,2,3,4,5,6,7,8,9]:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19];var i=multipleChoiceArray.indexOf(picNum);multipleChoiceArray.splice(i,1),shuffle(multipleChoiceArray),$("#sign_count").text(count+"/10"),answer1=labelsarray[picNum],k=returnRandom(5),multipleChoiceArray[k]=picNum,myString='<img src="'+bigPicsURL+picsarray[picNum]+'.png" width="150px" />',$("#contentSignPic5").html(myString),whatIsThis.play(),setTimeout(function(){whatIsItLabs()},1800)}}function whatIsItLabs(){var t;for(i=1;i<6;i++)t="#labels"+i,myString=labelsarray[multipleChoiceArray[i-1]],$(t).attr("name",myString),$("#labelText"+i).text(myString).css({height:"43px","font-size":"28px",margin:"2px 0 0 2px"}),$(t).show(),k=getRows($("#labelText"+i)),k>1&&reduceToHtWdth("#labelText"+i),$("#speaker-"+i).off().on("mouseenter",function(){myString=$(this).attr("id"),k=parseFloat(myString.substring(8)),k-=1,j=multipleChoiceArray[k],playAudio("t",picsarray[j])}),$("#speaker-"+i).show()}function havingAnsweredWII(){for(setTimeout(function(){havingAnsweredWIITwo()},400),1==correct?(highPop.play(),starRight(2),rightAnswers+=1):(wrongOverlay("multipleChoice"),wrong.play(),starWrong(2)),i=1;i<11;i++)$("#labels"+i).hide(),$("#speaker-"+i).hide()}function havingAnsweredWIITwo(){1==correct&&(picNum=myArray.shift(),whatIsItPicAndQ())}function whatIsItFinished(){clearInterval(refreshIntervalId),$("#contentSign").empty(),sharedEndInterface("multipleChoice"),defaultStatusString=modStrings[30],setStatusString(defaultStatusString),$("#introBlueTitle").text(modStrings[6]),myString=modStrings[13].replace("xxx",rightAnswers),myString=myString.replace("yyy",timerTime),myString2="<p>"+myString+"<br />","en"==shortCode&&(myString2+="<br /><br />"),myString2+=modStrings[14],myString2+="en"==shortCode?"<br />":" ",myString2+=modStrings[15],$("#introBlueText").html(myString2),i="primary"==level?rightAnswers>8?1:rightAnswers>6?2:rightAnswers>4?3:4:rightAnswers>16?1:rightAnswers>12?2:rightAnswers>8?3:4,$("#infoBrownTitle").html('<div id="smilieGraphic'+i+'"></div>'),$("#infoBrownText").html("<p><br /><br /><br /><br /><br />"+rightAnswers+" / "+numPics+"</p>")}function third(){currentActivity="writingTest",clickS.play(),rightAnswers=0,sharedInterface(2),defaultStatusString=modStrings[25],setStatusString(defaultStatusString),$("#infoBrownTitle").text(modStrings[7]),$("#infoBrownText").text(modStrings[44]),$("#introBlueTitle").text(modStrings[7]),myString="<p>"+modStrings[16]+modStrings[17]+"<br /><br />"+modStrings[18]+"</p>",$("#introBlueText").html(myString),$("#introBlueGoArra").text(modStrings[23]),prepareActivityArrays(),$("#introBlueGoArra").on("click",function(){clickS.play(),timerTime=0,interval2=null,$("#introBlueGoArra").remove(),$("#contentSign").empty(),defaultStatusString=modStrings[25],setStatusString(defaultStatusString),html='<div id="pipe_count"></div><div id="sign_count">'+count+'/10</div><div id="contentSignPicLab"><div id="contentSignPic5"></div></div>',$("#contentSign").append(html),html='<div id="sign3_yes"><div id="graphic3_yes"></div></div><div id="sign3_timerText">0 '+sec+"</div>",$("#contentSign").append(html),html='<div id="sign3_helpButton">'+modStrings[36]+'</div><div id="sign3_inputText"><input type="text" value=""></div><div id="sign3_keyboard"></div>',$("#contentSign").append(html),$("#sign3_helpButton").off().on("click",onClickHelp),addStars(),"English"!=ilanguage&&onAddSpecialCharsKeyboard(),interval2=window.setInterval(secondTimer,1e3),$("#sign3_yes").off("click").on("click",onClickYes),yesNoPicAndQ(picNum)})}function yesNoPicAndQ(i){if(count+=1,count>=11)onYesNoFinished();else{$("#sign_count").text(count+"/10");var t='<img class="introPic" src="'+bigPicsURL+picsarray[i]+'.png" width="150px" />';answer1=labelsarray[i],$("#contentSignPic5").html(t),$("input").focus().keyup(function(){inputString=$(this).val(),inputString==answer1&&(correct=!0,havingAnswered())})}}function onClickHelp(){playAudio("t",picsarray[picNum])}function onClickYes(){correct=inputString==answer1?!0:!1,havingAnswered()}function havingAnswered(){setTimeout(function(){havingAnswered2()},400),1==correct?(highPop.play(),rightAnswers+=1,starRight(1)):(wrong.play(),wrongOverlay("yesNo"),starWrong(1)),$("input").val("")}function havingAnswered2(){1==correct&&(picNum=myArray.shift(),yesNoPicAndQ(picNum))}function onYesNoFinished(){clearInterval(interval2),$("#contentSign").empty(),sharedEndInterface("writingTest"),defaultStatusString=modStrings[30],setStatusString(defaultStatusString),$("#introBlueTitle").text(modStrings[7]),myString2="<p>"+modStrings[19]+"<br />",myString=modStrings[13].replace("xxx",rightAnswers),myString=myString.replace("yyy",timerTime),myString2+=myString+"<br /><br />"+modStrings[20],$("#introBlueText").html(myString2),i="primary"==level?rightAnswers>8?1:rightAnswers>6?2:rightAnswers>4?3:4:rightAnswers>16?1:rightAnswers>12?2:rightAnswers>8?3:4,$("#infoBrownTitle").html('<div id="smilieGraphic'+i+'"></div>'),$("#infoBrownText").html("<p><br /><br /><br /><br /><br />"+rightAnswers+" / "+numPics+"</p>")}function wrongOverlay(i){html='<div id="wrongBgSign"><div id="wrongTitle">'+modStrings[26]+"</div>",html+="multipleChoice"==i?'<div id="wrongText1">'+modStrings[31]+'<br /></div><div id="wrongRightAnswer">'+answer1+'</div><div id="wrongOKbtn">OK</div><div id="wrongPic"><img src="'+bigPicsURL+picsarray[picNum]+'.png" width="310px" height="310px" /></div><div id="okText">'+modStrings[32]+"</div></div>":'<div id="wrongText1">'+modStrings[33]+'<br /></div><div id="wrongRightAnswer">'+inputString+'</div><div id="wrongAnswer2">'+answer1+'</div><div id="wrongOKbtn">OK</div><div id="wrongPic"><img src="'+bigPicsURL+picsarray[picNum]+'.png" width="310px" height="310px" /></div><div id="wrongTextTwo">'+modStrings[34]+"</div></div>",$("#content").append(html),$("#wrongOKbtn").off("click").on("click",function(){$("#wrongBgSign").remove(),picNum=myArray.shift(),"yesNo"==i?yesNoPicAndQ(picNum):"eitherOr"==i?eitherOrPicAndQ(picNum):whatIsItPicAndQ()})}function starRight(){myString="#WIIstar"+count,$(myString).html('<div class="star-right"></div>').on("click",{answer:"right"},starShowBox).on("mouseleave",starClearBox).on("mouseenter",{answer:"right"},starShowBox)}function starShowBox(t){if(0==starBoxVisible){var r,n=t.data.answer;myString=$(this).attr("id"),i=myString.substring("s"==myString.substring(0,1)?4:7),r=starPicsArray[i-1],offset=$(this).offset(),myString="right"==n?"starBoxRight":"starBoxWrong",html='<div id="'+myString+'"><div id="starBC"><img src="'+bigPicsURL+picsarray[r]+'.png" width="40px" height="40px" />&nbsp;&nbsp;'+labelsarray[r]+"</div></div>",$("#contentSign").append(html),myString="#"+myString,i=labelsarray[r].length,i>40?(j=16,k=0):i>30?(j=20,k=-1):(j=24,k=-6),$(myString).css("font-size",j),myString2=myString+" img",$(myString2).css("top",k),width=$(myString).width(),xLoc=offset.left-width-20,yLoc=offset.top-12,$("#starBoxRight,#starBoxWrong").offset({top:yLoc,left:xLoc}),$("#starBoxRight,#starBoxWrong").on("click",starClearBox),starBoxVisible=!0}}function starClearBox(){$("#starBoxRight").remove(),$("#starBoxWrong").remove(),starBoxVisible=!1}function starWrong(){myString="#WIIstar"+count,$(myString).html('<div class="star-wrong"></div>').on("mouseenter",{answer:"wrong"},starShowBox).on("mouseleave",starClearBox).on("mouseenter",{answer:"wrong"},starShowBox)}function addStars(){html='<div id="starsPrimaryWII">',i=11;for(var t=1;t<i;t++)html+='<div id="WIIstar'+t+'"><div class="star-grey"></div></div>';html+="</div>",$("#contentSign").append(html)}function returnKeysArray(){var t,r,n,e,s,o,a=[0,0];for("Spanish"==ilanguage?(chars="▲ÁÉÍÓÚÜ¿Ñ’",t=[10,0,0]):"Italian"==ilanguage?(chars="▲ÀÈÉÌÍÒÓÙÚ’",t=[8,0,0,3,44,24]):"French"==ilanguage?(chars="▲ÀÂÉÊÈËÎÏÔŒÛÜÇŸÙ’",t=[10,0,0,7,44,24]):"German"==ilanguage?(chars="▲ßÜÖÄ’",t=[6,0,0]):(chars="▲ÂÊÎÔÛŴŶ’",t=[9,0,0]),r=t.length/3,n=t[0],e=t[1],i=1;i<n;i++)a.push(45*i),a.push(e);for(o=1;r>o;o++)for(n=t[3*o],e=t[3*o+1],s=t[3*o+2],i=0;i<n;i++)a.push(s+45*i),a.push(e);return a}function onAddSpecialCharsKeyboard(){var i,t,r,n,e=!1,s=[];i=returnKeysArray(),t=chars.length;for(var n=0;t>n;n++)s.push(chars.charAt(n));for(r=0,n=0;t>n;n++)html='<div id="key'+n+'"><div class="keyText">'+s[n]+"</div></div>",$("#sign3_keyboard").append(html),$("#key"+n).css({position:"absolute",left:i[r],top:i[r+1],width:"35px",height:"35px",background:"#000000",border:"1px solid white","border-radius":"4px","font-family":"Arial,Helvetica","font-size":"18px",color:"white",cursor:"pointer"}).on("click",function(){clickS.play(),myString=$(this).children(".keyText").text();var i=myString.charCodeAt(0);"9650"==i?(e=!e,$(this).css(1==e?{background:"white",border:"1px solid red",color:"black"}:{background:"black",border:"1px solid white",color:"white"}),myString=""):e!==!0&&(myString=myString.toLowerCase()),myString=$("input").val()+myString,$("input").val(myString).focus(),myString==answer1&&(correct=!0,havingAnswered())}),r+=2}function adjustLabelSize(t){var r=document.getElementById(t);reduceFontToFitHeight(r,38,28,"150%"),j=parseInt(r.style.fontSize),i=Math.floor(100/j),$("#"+t).css("margin-top",i)}





}